---
import type { HTMLTag, Polymorphic } from "astro/types";

type SpaceString = `${number | string}${"px" | "em" | "rem" | "ch" | "vw" | "vh" | "vmin" | "vmax" | "%"}`;

type SpaceVar = `var(--s${number})`;

type Space = SpaceString | SpaceVar;

type Props<Tag extends HTMLTag> = Polymorphic<{
	as: Tag;
	space?: Space;
}>;

const { as: Tag = "div", space = "var(--s0)", class: className, ...props } = Astro.props;
---

<Tag
	{...props}
	class={`stack ${className ?? ""}`}
	style={{
		"--space": space,
	}}
>
	<slot />
</Tag>

<style lang="scss" is:global>
	.stack {
		display: flex;
		flex-direction: column;
		justify-content: flex-start;
	}

	.stack > * {
		margin-block: 0;
	}

	.stack > * + * {
		margin-block-start: var(--space, 1.5rem);
	}
</style>
